<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Download</title>
<style>
body{margin:0;background:linear-gradient(135deg,#0E7C86,#38BFB3,#9EE5C4);font-family:Arial;display:flex;justify-content:center;align-items:center;height:100vh}
.box{background:#F4F8F8;color:#0F2F3A;padding:28px;border-radius:16px;text-align:center;width:360px;box-shadow:0 20px 40px rgba(0,0,0,.25)}
.btn{background:#38BFB3;color:#0F2F3A;padding:14px;border-radius:12px;margin-top:18px;cursor:pointer;font-weight:bold}
.timer{font-size:28px;margin-top:18px;display:none}
.small{font-size:13px;color:#0F2F3A;margin-top:14px}
</style>
</head>
<body>

<div class="box">
<h2>Download File</h2>
<p>Silakan klik tombol di bawah.</p>
<div id="start" class="btn">MULAI</div>
<div id="timer" class="timer"></div>
<div id="act" style="display:none">
  <div class="btn" id="goBtn">DOWNLOAD FILE</div>
</div>
<div class="small">
üë• Pengunjung: <span id="visitCount">0</span> orang<br>
‚¨áÔ∏è Download: <span id="downloadCount">0</span> kali
</div>
</div>

<script src="links.js"></script> 
  
<script>
const key = location.pathname.split("/").pop();
const DATA = LINKS[key];

const PAGE = DATA.page;
const FILE = DATA.file;
const SHOP = DATA.shop;
const API="https://script.google.com/macros/s/AKfycbxokIcAUjpN3RGA4aY1hJ_qlrQk9X0T994eWMAuqzvpXtHEC8bElIID6Jarg82Djq8F/exec";

fetch(`${API}?page=${PAGE}&action=visit`).then(r=>r.json()).then(j=>{
 if(j.ok){ visitCount.innerText=j.visits; downloadCount.innerText=j.downloads; }
});

start.onclick=()=>{
 let t=5;
 start.style.display="none";
 timer.style.display="block";
 timer.innerText="Tunggu "+t+" detik";
 const i=setInterval(()=>{
  t--; timer.innerText="Tunggu "+t+" detik";
  if(t<=0){clearInterval(i);timer.style.display="none";act.style.display="block";}
 },1000);
};

goBtn.onclick=()=>{
 fetch(`${API}?page=${PAGE}&action=download`).then(r=>r.json()).then(j=>{
  if(j.ok) downloadCount.innerText=j.downloads;
 });
 window.open(SHOP,"_blank");
 setTimeout(()=>location.href=FILE,1200);
};
</script>
</body>
</html>
